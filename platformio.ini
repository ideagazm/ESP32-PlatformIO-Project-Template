[platformio]
default_envs = esp32dev
description = ESP32 Relay Controller with Web Interface

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Library dependencies (add your libraries here)
lib_deps = 
    ; Example: bblanchon/ArduinoJson@^7.0.0
    ; Add your project libraries here

; Build flags
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

; Upload settings
upload_speed = 921600
upload_port = COM3

; Monitor settings
monitor_port = COM3
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder
    time
    log2file

; OTA settings
upload_protocol = esptool
upload_flags = 
    --flash_mode=dio
    --flash_freq=80m

; Debugging
debug_tool = esp-prog
debug_init_break = tbreak setup

; SPIFFS settings
board_build.filesystem = spiffs
board_build.partitions = default.csv

; Development environment
[env:esp32dev_debug]
extends = env:esp32dev
build_type = debug
build_flags = 
    ${env:esp32dev.build_flags}
    -DCORE_DEBUG_LEVEL=5
    -DDEBUG_ESP_PORT=Serial
    -DDEBUG_ESP_WIFI
    -DDEBUG_ESP_HTTP_SERVER

; OTA Update environment
[env:esp32dev_ota]
extends = env:esp32dev
upload_protocol = espota
upload_port = esp-relay.local
upload_flags = 
    --port=3232
    --auth=admin